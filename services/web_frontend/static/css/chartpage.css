/* chartpage.css - (차트1/2 + 유저서비스) 공통 스타일 */
:root {
  --primary-color: #42a5f5;
  --primary-dark: #1976d2;
  --background-gradient: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
  --card-shadow: 0 10px 30px rgba(0,0,0,0.1);
  --border-radius: 15px;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  background: var(--background-gradient);
  min-height: 100vh;
  padding-top: 80px; /* 헤더 높이만큼 */
}

.container { max-width: 1400px; margin: 0 auto; padding: 0 20px; }
main { padding: 30px 0; }

/* ===== 공통 레이아웃 ===== */
.main-layout {
  display: grid;
  grid-template-columns: 350px 1fr;
  gap: 30px;
  min-height: calc(100vh - 160px);
}

/* ===== 컨트롤 패널 ===== */
.control-panel {
  background: #fff;
  border-radius: var(--border-radius);
  padding: 25px;
  box-shadow: var(--card-shadow);
  height: fit-content;
  position: sticky;
  top: 100px;
  animation: fadeInUp 0.6s ease-out;
}

.panel-section { margin-bottom: 25px; padding-bottom: 20px; border-bottom: 1px solid #f0f0f0; }
.panel-section:last-child { border-bottom: none; margin-bottom: 0; }
.panel-section h3 { color: var(--primary-color); font-size: 1.1rem; margin-bottom: 15px; }

.form-group { margin-bottom: 15px; }
.form-group label {
  display: block; margin-bottom: 8px; color: #333; font-weight: 500; font-size: 0.95rem;
}
.form-group select {
  width: 100%; padding: 12px; border: 2px solid #e3f2fd; border-radius: 8px;
  font-size: 0.95rem; background: #fff; transition: border-color 0.3s ease; cursor: pointer;
}
.form-group select:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 3px rgba(66,165,245,0.1); }

.generate-btn {
  width: 100%; background: linear-gradient(45deg, var(--primary-color), #29b6f6);
  color: #fff; border: 0; padding: 15px; border-radius: 10px; font-size: 1rem; font-weight: 600;
  cursor: pointer; transition: all 0.3s ease; margin-top: 20px;
}
.generate-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(66,165,245,0.3); }

.panel-actions { margin-top: 20px; }
.action-btn {
  width: 100%; padding: 12px; border: 0; border-radius: 8px; font-size: 0.9rem;
  cursor: pointer; transition: all 0.3s ease; margin-bottom: 10px;
}
.action-btn.primary { background: var(--primary-color); color: #fff; }
.action-btn:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }

/* ===== 차트 영역 컨테이너 ===== */
.chart-area {
  background: #fff; border-radius: var(--border-radius); box-shadow: var(--card-shadow); overflow: hidden;
  animation: fadeInUp 0.6s ease-out 0.2s both;
}
.chart-header {
  background: linear-gradient(45deg, var(--primary-color), #29b6f6);
  padding: 20px; color: #fff;
}
.chart-header h2 { margin: 0; font-size: 1.5rem; }

.chart-container {
  padding: 30px; min-height: 500px; position: relative;
  display: flex; align-items: center; justify-content: center;
}
#mainChart { max-width: 100%; max-height: 450px; }

.chart-placeholder { text-align: center; color: #666; }
.placeholder-content { display: flex; flex-direction: column; align-items: center; gap: 15px; }
.placeholder-icon { font-size: 4rem; opacity: 0.3; }
.placeholder-content h3 { color: var(--primary-color); font-size: 1.5rem; }
.placeholder-content p { font-size: 1rem; line-height: 1.5; }

/* 로딩 오버레이 */
.chart-loading {
  display: flex; flex-direction: column; align-items: center; gap: 20px; color: var(--primary-color);
  position: absolute; inset: 0; background: rgba(255,255,255,0.9); z-index: 10;
}
.loading-spinner {
  width: 50px; height: 50px; border: 4px solid #e3f2fd; border-top: 4px solid var(--primary-color);
  border-radius: 50%; animation: spin 1s linear infinite;
}

/* ===== 정보 카드 ===== */
.chart-info { padding: 30px; background: #f8f9fa; border-top: 1px solid #e9ecef; }
.info-card {
  background: #fff; border-radius: 10px; padding: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.05);
}
.info-card h4 { color: var(--primary-color); margin-bottom: 15px; font-size: 1.1rem; }
.info-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; }
.info-item {
  display: flex; justify-content: space-between; align-items: center;
  padding: 10px; background: #f8f9fa; border-radius: 6px;
}
.info-item .label { font-size: 0.9rem; color: #666; font-weight: 500; }
.info-item .value { font-size: 0.9rem; color: #333; font-weight: 600; }

/* ===== Userservice & 공통 차트 블록 ===== */
.chart-grid {
  display: flex;                 /* 기본: 세로 스택 */
  flex-direction: column;
  gap: 30px;
}

.chart-block {
  background: #fff; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.08);
  overflow: hidden;
}
.chart-block-header {
  background: linear-gradient(45deg, #42a5f5, #29b6f6);
  color: #fff; padding: 14px 18px; font-weight: 600; font-size: 1.05rem;
}
.chart-block-content {
  padding: 12px; display: flex; gap: 10px; align-items: stretch; min-height: 320px;
}

/* 막대/도넛 컨테이너 */
.bar-charts-container, .donut-charts-container {
  min-width: 0; height: 290px; display: flex; gap: 8px;
}
.bar-charts-container { flex: 3; }
.donut-charts-container { flex: 2; }

.individual-bar-chart, .donut-chart-item {
  position: relative; border: 1px solid #e9ecef; border-radius: 8px; padding: 8px;
  min-width: 0; display: flex; flex-direction: column;
}
.individual-bar-chart { flex: 1; }
.individual-bar-chart canvas {
  flex: 1; min-height: 180px !important; max-width: 100%;
}

.donut-chart-item { flex: 1; align-items: center; justify-content: center; }
.donut-chart-item canvas { width: 80px !important; height: 80px !important; }

.score-comparison-block { display: flex; gap: 16px; width: 100%; align-items: stretch; }
.user-score-chart, .similar-scores-chart { flex: 1; height: 250px; position: relative; }

.chart-title { font-size: 0.85rem; color: #42a5f5; font-weight: 600; text-align: center; margin-bottom: 8px; }

/* ===== (선택) 차트 페이지에서 3:1 레이아웃이 필요할 때만 사용 ===== */
.chart-grid--two-col {
  display: grid;
  grid-template-columns: 3fr 1fr;
  gap: 20px;
  margin-bottom: 20px;
}

/* ===== 글로벌 로더 ===== */
#global-loader { position: fixed; inset: 0; background: rgba(0,0,0,0.45); z-index: 9999; display: none; }
#global-loader .gl-inner { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; color: #fff; font-size: 16px; }
#global-loader .gl-spinner {
  width: 48px; height: 48px; margin: 0 auto 12px; border: 4px solid rgba(255,255,255,0.35);
  border-top-color: #fff; border-radius: 50%; animation: gl-spin 0.9s linear infinite;
}
#global-loader .gl-text { letter-spacing: .2px; }
@keyframes gl-spin { to { transform: rotate(360deg); } }

/* ===== 유틸 ===== */
.is-hidden { display: none !important; }

/* ===== Responsive ===== */
@media (max-width: 1200px) {
  .main-layout { grid-template-columns: 300px 1fr; gap: 20px; }
}
@media (max-width: 992px) {
  .main-layout { grid-template-columns: 1fr; gap: 20px; }
  .control-panel { position: static; order: 2; }
  .chart-area { order: 1; }
}
@media (max-width: 768px) {
  .container { padding: 0 15px; }
  .chart-container { padding: 20px; min-height: 400px; }
  .info-grid { grid-template-columns: 1fr; }
  .chart-block-content { flex-direction: column; min-height: 0; }
  .bar-charts-container, .donut-charts-container { height: auto; }
  .user-score-chart, .similar-scores-chart { height: 220px; }
}

/* === Filter Toolbar: 가로 스크롤 칩/버튼 공통 === */
.filter-toolbar {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 12px;
}

.filter-scroll {
  display: flex;
  flex-wrap: nowrap;
  gap: 8px;
  overflow-x: auto;
  overflow-y: hidden;
  -webkit-overflow-scrolling: touch;
  scrollbar-gutter: stable both-edges;
  scrollbar-width: thin;                          /* Firefox */
  scrollbar-color: var(--primary-color) #e9eef6;  /* Firefox */
  padding: 6px 10px;
  border-radius: 10px;
  background: #fff;
  box-shadow: 0 2px 8px rgba(0,0,0,.06);
  min-height: 44px;                               /* 터치 타깃 */
  scroll-snap-type: x proximity;                  /* 스냅(선택) */
}

/* WebKit 스크롤바 */
.filter-scroll::-webkit-scrollbar { height: 8px; }
.filter-scroll::-webkit-scrollbar-track { background: #e9eef6; border-radius: 8px; }
.filter-scroll::-webkit-scrollbar-thumb {
  background: linear-gradient(45deg, var(--primary-color), #29b6f6);
  border-radius: 8px;
}

/* 필터 칩(버튼) */
.filter-chip {
  flex: 0 0 auto;
  white-space: nowrap;
  padding: 8px 12px;
  border-radius: 9999px;
  border: 1px solid #e3f2fd;
  background: #fff;
  color: #333;
  /* 글꼴/가독성 */
  font: 500 0.9rem/1.2 -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  box-shadow: 0 1px 2px rgba(0,0,0,.04);
  cursor: pointer;
  transition: transform .15s ease, box-shadow .15s ease, background .15s ease, color .15s ease, border-color .15s ease;
  scroll-snap-align: start;
}
.filter-chip:hover { transform: translateY(-1px); box-shadow: 0 4px 10px rgba(0,0,0,.08); }
.filter-chip.active {
  background: var(--primary-color);
  border-color: var(--primary-color);
  color: #fff;
}

/* 좌우 네비게이션 화살표 (기존 .arrow-btn과 톤 맞춤) */
.filter-toolbar .arrow-btn {
  width: 28px; height: 28px; min-width: 28px;
  border: 1px solid #ddd; background: #fff; border-radius: 6px;
  display: flex; align-items: center; justify-content: center;
  font-size: 12px; color: #333; transition: all .2s;
}
.filter-toolbar .arrow-btn:hover { background: #f5f5f5; border-color: var(--primary-color); }
.filter-toolbar .arrow-btn:active { background: var(--primary-color); color: #fff; }

/* (선택) 섹션 헤더 라인 높이/폰트 일관화 */
.panel-section h3,
.chart-header h2 {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  line-height: 1.25;
}



/* ===== Animations ===== */
@keyframes spin { 0%{transform:rotate(0)} 100%{transform:rotate(360deg)} }
@keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
