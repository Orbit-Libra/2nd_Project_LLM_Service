{% extends "common/base.html" %}
{% block title %}Libra | Q&A ëª©ë¡{% endblock %}

{% block head_extra %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/question.css') }}">
{% endblock %}

{% block content %}
<section class="qna-hero fade-in">
  <div class="container">
    <h1>Q&amp;A</h1>
    <p class="lead">Libra ì´ìš©ê³¼ ê´€ë ¨ëœ ë¬¸ì˜ë‚˜ ì˜ê²¬ì„ ë‚¨ê¸°ëŠ” ê³³ì…ë‹ˆë‹¤. </p>
    <a class="btn primary" href="{{ url_for('qna.qna_new') }}">ë¬¸ì˜í•˜ê¸°</a>
  </div>
</section>

<!-- ìƒë‹¨ í•„í„°ë°” (êµ¬ì¡°ë§Œ; ì¶”í›„ ì„œë²„ ì—°ë™ ì‹œ GET íŒŒë¼ë¯¸í„° ì‚¬ìš©) -->
<section class="qna-filterbar fade-in" aria-label="ê²€ìƒ‰/í•„í„°">
  <div class="container">
    <form method="get" action="{{ url_for('qna.qna_list') }}" class="filter-form" role="search">
      <div class="filters-left">
        <select name="kind">
          <option value="">ê²€ìƒ‰êµ¬ë¶„(ì „ì²´)</option>
          <option value="ì¼ë°˜">ì¼ë°˜</option>
          <option value="ë¯¼ì›">ë¯¼ì›</option>
        </select>
        <select name="public">
          <option value="">ê³µê°œì—¬ë¶€(ì „ì²´)</option>
          <option value="1">ê³µê°œ</option>
          <option value="0">ë¹„ê³µê°œ</option>
        </select>
        <select name="status">
          <option value="">ì²˜ë¦¬ìƒí™©(ì „ì²´)</option>
          <option value="ë‹µë³€ì™„ë£Œ">ë‹µë³€ì™„ë£Œ</option>
          <option value="ì²˜ë¦¬ì¤‘">ì²˜ë¦¬ì¤‘</option>
        </select>
      </div>
      <div class="filters-right">
        <select name="field">
          <option value="title">ì œëª©</option>
        </select>
        <input type="text" name="q" placeholder="ê²€ìƒ‰ì–´" aria-label="ê²€ìƒ‰ì–´">
        <button type="submit" class="btn small">ê²€ìƒ‰</button>
      </div>
    </form>
  </div>
</section>

<section class="qna-list-section fade-in" aria-label="ë¬¸ì˜ ëª©ë¡">
  <div class="container">
    <table class="qna-table" aria-describedby="qnaListCaption">
      <caption id="qnaListCaption" class="sr-only">(ì´ {{ total }}ê±´)</caption>
      <thead>
        <tr>
          <th style="width:7rem;">ë²ˆí˜¸</th>
          <th style="width:7rem;">êµ¬ë¶„</th>
          <th style="width:7rem;">ê³µê°œì—¬ë¶€</th>
          <th>ì œëª©</th>
          <th style="width:6rem;">ì²¨ë¶€</th>
          <th style="width:8rem;">ì§ˆë¬¸ì</th>
          <th style="width:10rem;">ë“±ë¡ì¼</th>
          <th style="width:8rem;">ì²˜ë¦¬ìƒí™©</th>
        </tr>
      </thead>
      <tbody>
        {% set no = start_no %}
        {% for it in items %}
          <tr>
            <td>{{ no - loop.index0 }}</td>
            <td>{{ it.kind }}</td>
            <td>{{ 'ê³µê°œ' if it.is_public else 'ë¹„ê³µê°œ' }}</td>

    
            <td class="qna-title-cell">
            <td>{{ 'ğŸ“' if it.has_file else '' }}</td>
            <td>{{ it.author }}</td>
            <td>{{ it.created_at.strftime('%Y-%m-%d') }}</td>
            <td class="status {{ 'done' if it.status=='ë‹µë³€ì™„ë£Œ' else 'doing' }}">{{ it.status }}</td>
          </tr>
        {% else %}
          <tr><td colspan="8" style="padding:1.6rem;">ì•„ì§ ë“±ë¡ëœ ë¬¸ì˜ê°€ ì—†ìŠµë‹ˆë‹¤.</td></tr>
        {% endfor %}
      </tbody>
    </table>

    <nav aria-label="í˜ì´ì§€ íƒìƒ‰">
  <ul class="pager">
    <!-- ì²˜ìŒ/ì´ì „: ë¹„í™œì„±ë„ í•­ìƒ í‘œì‹œ -->
    <li class="{{ 'disabled' if page==1 else '' }}">
      {% if page>1 %}<a href="{{ url_for('qna.qna_list', page=1) }}" aria-label="ì²« í˜ì´ì§€">Â«</a>
      {% else %}<span aria-disabled="true">Â«</span>{% endif %}
    </li>
    <li class="{{ 'disabled' if page==1 else '' }}">
      {% if page>1 %}<a href="{{ url_for('qna.qna_list', page=page-1) }}" aria-label="ì´ì „ í˜ì´ì§€">â€¹</a>
      {% else %}<span aria-disabled="true">â€¹</span>{% endif %}
    </li>

    <!-- 1..N ì „ë¶€ ë…¸ì¶œ -->
    {% for p in range(1, pages+1) %}
      <li>
        {% if p == page %}
          <span class="current" aria-current="page">{{ p }}</span>
        {% else %}
          <a href="{{ url_for('qna.qna_list', page=p) }}">{{ p }}</a>
        {% endif %}
      </li>
    {% endfor %}

    <!-- ë‹¤ìŒ/ë§ˆì§€ë§‰: ë¹„í™œì„±ë„ í•­ìƒ í‘œì‹œ -->
    <li class="{{ 'disabled' if page==pages else '' }}">
      {% if page<pages %}<a href="{{ url_for('qna.qna_list', page=page+1) }}" aria-label="ë‹¤ìŒ í˜ì´ì§€">â€º</a>
      {% else %}<span aria-disabled="true">â€º</span>{% endif %}
    </li>
    <li class="{{ 'disabled' if page==pages else '' }}">
      {% if page<pages %}<a href="{{ url_for('qna.qna_list', page=pages) }}" aria-label="ë§ˆì§€ë§‰ í˜ì´ì§€">Â»</a>
      {% else %}<span aria-disabled="true">Â»</span>{% endif %}
    </li>
  </ul>
</nav>

  </div>
</section>
{% endblock %}


{% block scripts %}
<script>
  // ì„¹ì…˜ í˜ì´ë“œì¸
  const io = new IntersectionObserver(es => es.forEach(e => { if (e.isIntersecting) e.target.classList.add('appear'); }), {threshold:.15});
  document.querySelectorAll('.fade-in').forEach(el => io.observe(el));
</script>
{% endblock %}
