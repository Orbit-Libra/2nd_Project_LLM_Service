{% extends "common/base.html" %}

{% block title %}Libra | Balancing Infrastructure{% endblock %}

{% block head_extra %}
  <!-- 메인 페이지 전용 CSS -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/common/chatbot.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}" />
{% endblock %}

{% block content %}
  <!-- 플로팅 헤더 버튼 -->
  <div class="floating-header-btn" id="floating-header-btn"></div>

  <!-- 스크롤 컨테이너 -->
  <div class="sections-wrapper" id="sections-wrapper">
    <!-- Hero Slider -->
    <section class="section slider" id="hero-slider">
      <!-- Slide 1 -->
      <div class="slide active">
        <img src="{{ url_for('static', filename='images/overlap01.jpg') }}" alt="Slide 1">
        <div class="slider-overlay">
          <img src="{{ url_for('static', filename='images/logo.jpeg') }}" alt="Libra Logo" class="overlay-logo logo-only" />
        </div>
      </div>
      <!-- Slide 2 -->
      <div class="slide">
        <img src="{{ url_for('static', filename='images/overlap02.jpg') }}" alt="Slide 2">
        <div class="slider-overlay">
          <div class="slide-title-main">교육 인프라 예측 서비스</div><br/>
          <div class="slide-title-sub">각 대학의 학습환경 예측 및 발전도 분석</div>
        </div>
      </div>
      <!-- Slide 3 -->
      <div class="slide">
        <img src="{{ url_for('static', filename='images/overlap03.jpg') }}" alt="Slide 3">
        <div class="slider-overlay">
          <div class="slide-title-main">마이 서비스</div><br/>
          <div class="slide-title-sub">사용자의 정보를 토대로 한<br/>나의 인프라 점수 알아보기</div>
        </div>
      </div>
      <!-- arrows -->
      <div class="arrow left" id="prevBtn">&#10094;</div>
      <div class="arrow right" id="nextBtn">&#10095;</div>
    </section>

    <!-- Three Columns -->
    <section class="section subgrid" id="quick-links">
      <!-- 1번 카드 -->
      <div class="sub sub1" data-link="{{ url_for('chart') }}">
        <img class="sub-img" src="{{ url_for('static', filename='images/slide01.jpg') }}" alt="환경 점수 예측">
        <div class="sub-overlay">
          <span class="sub-title-main">환경점수 검색</span><br/>
          <span class="sub-title-sub">>> 대학별 인프라<br/>점수 찾아보기</span>
        </div>
      </div>
      <!-- 2번 카드 -->
      <div class="sub sub2" data-link="{{ url_for('prediction') }}">
        <img class="sub-img" src="{{ url_for('static', filename='images/slide02.jpg') }}" alt="점수 변환 예측">
        <div class="sub-overlay">
          <span class="sub-title-main">발전도 검색</span><br/>
          <span class="sub-title-sub">>> 연도 별 점수 추이 찾아보기</span>
        </div>
      </div>
      <!-- 3번 카드 -->
      <div class="sub sub3">
        <img class="sub-img" src="{{ url_for('static', filename='images/slide03.jpg') }}" alt="로그인 전용">
        <div class="sub-overlay">
          <span class="sub-title-main">마이 서비스</span><br/>
          <span class="sub-title-sub">>> 나의 데이터로<br/>환경점수 알아보기</span>
        </div>
      </div>
    </section>
  </div>

  <!-- Chatbot (이 페이지에서만 보이게 유지하려면 여기 둠) -->
  <div class="chatbot" id="chatToggle">
    <div class="chat-icon">
      <img src="{{ url_for('static', filename='images/chatbot.png') }}" alt="Chatbot" id="chatbot-img">
    </div>
  </div>

  <div class="chat-window" id="chatWindow">
    <div class="chat-header">
      <span>Libra Assistant</span>
      <button id="chatCloseBtn">&times;</button>
    </div>
    <div class="chat-body" id="chatBody">
      <div style="color: #666; padding: 10px; text-align: center;">
        안녕하세요! Libra 챗봇입니다. 무엇을 도와드릴까요?
      </div>
    </div>
    <div class="chat-input">
      <input type="text" id="chatInput" placeholder="메시지를 입력하세요...">
      <button id="chatSendBtn">전송</button>
    </div>
  </div>
{% endblock %}

{% block scripts %}
  <!-- 전역 변수: main.js보다 먼저 선언 필요 -->
  <script>
    window.isLoggedIn    = {{ 'true' if session.get('user') else 'false' }};
    window.myServiceUrl  = "{{ url_for('my_service') }}";  // userservice.html 라우트
    window.loginUrl      = "{{ url_for('login') }}";       // login.html 라우트
    window.predictionUrl = "{{ url_for('prediction') }}";  // chartpage2.html 라우트
    window.chartUrl      = "{{ url_for('chart') }}";       // chartpage1.html 라우트
  </script>

  <!-- 페이지 전용 JS -->
  <script src="{{ url_for('static', filename='js/common/chatbot.js') }}"></script>
  <script src="{{ url_for('static', filename='js/main.js') }}"></script>
{% endblock %}
