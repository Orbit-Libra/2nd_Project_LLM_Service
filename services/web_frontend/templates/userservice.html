{% extends "common/base.html" %}

{% block title %}Libra - ë§ˆì´ ì„œë¹„ìŠ¤{% endblock %}

{% block head_extra %}
  <!-- í˜ì´ì§€ ì „ìš© CSS -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/chartpage.css') }}">
  <!-- Chart.jsê°€ í•„ìš”í•˜ë©´ ìœ ì§€ (í˜„ì¬ ê¸°ëŠ¥ìƒ ê¼­ í•„ìš” ì—†ìœ¼ë©´ ì œê±° ê°€ëŠ¥) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js" defer></script>
{% endblock %}

{% block content %}
  <!-- ê¸€ë¡œë²Œ ë¡œë” -->
  <div id="global-loader" aria-live="polite" aria-busy="true" style="display:none">
    <div class="gl-inner">
      <div class="gl-spinner"></div>
      <div class="gl-text">ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”â€¦</div>
    </div>
  </div>

  <div class="container">
    <div class="main-layout">
      <!-- ì™¼ìª½ íŒ¨ë„ -->
      <aside class="control-panel">
        <div class="panel-section">
          <h3>ë‚´ ì •ë³´</h3>
          <div class="table-info">
            <div class="info-item">
              <span class="label">ì´ë¦„</span>
              <span class="value" id="userName">-</span>
            </div>
            <div class="info-item">
              <span class="label">ì†Œì†ëŒ€í•™</span>
              <span class="value" id="userUniv">-</span>
            </div>
          </div>
        </div>

        <div class="panel-actions">
          <button class="action-btn secondary" id="btnSyncPredict" type="button">ì˜ˆì¸¡ ì ìˆ˜ ë™ê¸°í™”</button>
          <button class="action-btn primary" id="btnGoProfile" type="button">ë‚´ì •ë³´ ê´€ë¦¬</button>
          <a class="action-btn" id="btnGoAgent" href="{{ url_for('agent_ui.agent_page') }}">ì—ì´ì „íŠ¸ ì„œë¹„ìŠ¤ (test)</a>
        </div>
      </aside>

      <!-- ì˜¤ë¥¸ìª½ ì˜ì—­ -->
      <section class="chart-area">
        <div class="chart-header">
          <h2>ë§ˆì´ ì„œë¹„ìŠ¤</h2>
        </div>

        <div class="chart-grid" id="chartGrid">
          <div class="chart-placeholder" id="chartPlaceholder">
            <div class="placeholder-content">
              <div class="placeholder-icon">ğŸ‘¤</div>
              <h3>ë‚´ ì •ë³´ ê¸°ë°˜ ê°œì¸í™” ì˜ì—­</h3>
              <p>ì™¼ìª½ì—ì„œ ë‚´ ì •ë³´ë¥¼ í™•ì¸í•˜ê³ , â€œì˜ˆì¸¡ ì ìˆ˜ ë™ê¸°í™”â€ë¥¼ ëˆ„ë¥¸ ë’¤ ë¶„ì„ ê²°ê³¼ë¥¼ í™•ì¸í•˜ì„¸ìš”.</p>
            </div>
          </div>
        </div>

        <div class="chart-info">
          <div class="info-card">
            <h4>ì•ˆë‚´</h4>
            <div class="info-grid">
              <div class="info-item">
                <span class="label">í•™ë…„ë³„ ì…ë ¥ ê°’</span>
                <span class="value">í”„ë¡œí•„ &gt; íšŒì›ì •ë³´ ìˆ˜ì •ì—ì„œ ì…ë ¥</span>
              </div>
              <div class="info-item">
                <span class="label">ì €ì¥ ìœ„ì¹˜</span>
                <span class="value">USER_DATA í…Œì´ë¸”</span>
              </div>
            </div>
          </div>
        </div>
      </section>

    </div>
  </div>
{% endblock %}

{% block scripts %}
  <!-- ì„œë²„ ê°’ ì£¼ì…: userservice.jsë³´ë‹¤ ë¨¼ì € -->
  <script>
    window.__USER__ = {
      name: {{ (usr_name|tojson) if usr_name is defined else '""' }},
      univ: {{ (usr_snm|tojson)  if usr_snm  is defined else '""'  }}
    };
  </script>

  <!-- í˜ì´ì§€ ì „ìš© JS -->
  <script src="{{ url_for('static', filename='js/userservice.js') }}" defer></script>
{% endblock %}
